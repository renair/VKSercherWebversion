<html>
<head>
	<title>Test socket.io</title>
<!--	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.6.0/socket.io.min.js"></script>-->
	<script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div id="response"></div>
    <input type="number" placeholder="from" id="from">
    <input type="number" placeholder="to" id="to">
    <button onclick="startSerch();">Please start</button>
    <button id="stopSerch">STOP</button>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
    function startSerch(){
        
        var socket = io();

        socket.on('disconnect',function(){
            console.log("Disconnected");
            socket.close();
        });
        
        socket.on('serchResultEvent', function (data) {
            
        });

        socket.on('serchInProgressEvent',function(data){
            $("#response").text(data);
        });
        
        $("#stopSerch").click(function(){
            socket.emit('stopSerchEvent',{});
            //socket.close();
        });

        socket.emit('serchEvent', {
            start:+$("#from").val(),
            destination:+$("#to").val()
        });
    }
	</script>
</body>
</html>